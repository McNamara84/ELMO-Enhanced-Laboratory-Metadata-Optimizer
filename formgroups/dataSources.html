<div class="card mb-2">
  <div class="card-header"><b data-translate="dataSources.title">Data Sources</b> <i class="bi bi-question-circle-fill"
      data-help-section-id="help-datasources-fg"></i></div>
  <div class="card-body">
    <!-- Main container for data sources -->
    <div id="group-datasources">
      <div class="row" data-source-row>
        <!-- Data Source Type (Dropdown) -->
        <div class="col-12 col-sm-12 col-md-4 col-lg-3 p-1 visibility-datasources-basic">
          <div class="input-group has-validation">
            <div class="form-floating">
              <select class="form-select input-with-help input-right-no-round-corners"
                aria-label="Default select example" id="input-datasource-type" name="datasource_type[]" required>
                <!-- Satellite will be the default value -->
                <option value="S" selected>Satellite</option>
                <option value="G">Ground data</option>
                <option value="A">Altimetry</option>
                <option value="M">Model</option>
                <option value="T">Topography</option>
              </select>
              <label for="input-datasource-type" data-translate="dataSources.type">Type<span
                  class="text-danger">*</span></label>
              <div class="invalid-feedback" data-translate="general.pleaseChoose">Please choose</div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text"><i class="bi bi-question-circle-fill"
                  data-help-section-id="help-datasource-type"></i></span>
            </div>
          </div>
        </div>
        <!-- Description (free text) -->
        <div class="col-12 col-sm-12 col-md-5 col-lg-4 p-1 visibility-datasources-basic">
          <div class="input-group">
            <div class="form-floating">
              <textarea class="form-control input-right-no-round-corners"
                id="input-datasource-description" name="datasource_description[]" rows="1"></textarea>
              <label for="input-datasource-description" data-translate="dataSources.description">Description</label>
            </div>
          </div>
        </div>
        <!-- Details (Dropdown) -->
        <div class="col-12 col-sm-12 col-md-4 col-lg-4 p-1 visibility-datasources-details">
          <div class="input-group has-validation">
            <div class="form-floating">
              <select class="form-select input-with-help input-right-no-round-corners"
                aria-label="Default select example" id="input-datasource-details" name="datasource_details[]" required>
                <option disabled selected hidden value="">Select type first</option>
              </select>
              <label for="input-datasource-details" data-translate="dataSources.details">Details<span
                  class="text-danger">*</span></label>
              <div class="invalid-feedback" data-translate="general.pleaseChoose">Please choose</div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text"><i class="bi bi-question-circle-fill"
                  data-help-section-id="help-datasource-details"></i></span>
            </div>
          </div>
        </div>
        <!-- Model-specific Section -->
        <!-- Identifier (Text Input)-->
        <div class="col-12 col-sm-3 col-md-3 col-lg-2 p-1 visibility-datasources-identifier">
          <div class="input-group has-validation">
            <div class="form-floating">
              <input type="text" class="form-control input-with-help input-right-no-round-corners"
                name="dIdentifier[]" />
              <label for="input-datasource-identifier" data-translate="dataSources.identifier">Identifier</label>
              <div class="invalid-feedback" data-translate="dataSources.identifierInvalid">Please enter a valid
                identifier.</div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text"><i class="bi bi-question-circle-fill"
                  data-help-section-id="help-datasource-identifier"></i></span>
            </div>
          </div>
        </div>
        <!-- Identifier Type (Dropdown)-->
        <div class="col-12 col-sm-2 col-md-2 col-lg-2 p-1 visibility-datasources-identifier">
          <div class="input-group has-validation">
            <div class="form-floating">
              <select class="form-select input-with-help input-right-no-round-corners"
                aria-label="Default select example" name="dIdentifierType[]">
              </select>
              <label for="input-datasource-identifiertype"
                data-translate="dataSources.identifierType">Identifier type</label>
              <div class="invalid-feedback" data-translate="general.pleaseChoose">Please choose</div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text"><i class="bi bi-question-circle-fill"
                  data-help-section-id="help-datasource-identifier-type"></i></span>
            </div>
          </div>
        </div>
        <!-- Satellite-specific Section -->
        <div class="col-12 col-sm-12 col-md-5 col-lg-4 p-1 visibility-datasources-satellite">
          <div class="input-group has-validation input-margin-top-bottom">
            <div class="form-floating">
              <div class="input-group has-validation">
                <input type="text" class="form-control input-with-help input-right-no-round-corners"
                  id="input-datasources-Platforms" name="satellite_platform[]" />
                <span class="input-group-text"><i class="bi bi-question-circle-fill"
                    data-help-section-id="help-gcmd-platforms-keyword"></i></span>
              </div>
            </div>
            <div class="col-auto p-2">
              <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                data-bs-target="#modal-platforms-datasource" id="button-datasource-platforms">
                <i class="bi bi-diagram-3"></i>
              </button>
            </div>
          </div>
        </div>
        <!-- Add Button -->
        <div class="col-2 col-sm-2 col-md-1 col-lg-1 d-flex justify-content-center align-items-center visibility-datasources-basic">
          <button type="button" class="btn btn-primary addDataSource" id="button-datasource-add"
            data-translate="general.add">
            +
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal for GCMD PLATFORMS (specific to Data Sources) -->
<div class="modal fade" id="modal-platforms-datasource" tabindex="-1" aria-labelledby="label-platforms-datasource-modal"
  aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="label-platforms-datasource-modal" data-translate="keywords.Platforms">
          GCMD Platforms
        </h5>
        <span class="input-group-text"><i class="bi bi-question-circle-fill"
            data-help-section-id="help-keywords-keywordviewer"></i></span>
      </div>
      <div class="modal-body d-flex">
        <!-- Left Side: Keyword Selection Tree -->
        <div class="w-50 pe-3 border-end">
          <label for="input-platforms-thesaurussearch-ds" class="visually-hidden">Search for keywords</label>
          <input type="text" class="form-control mb-3" id="input-platforms-thesaurussearch-ds"
            placeholder="Search for keywords..." data-translate="keywords.searchPlaceholder"
            aria-label="Search for keywords">
          <div id="jstree-platforms-datasource"></div>
        </div>
        <!-- Right Side: Selected Keywords -->
        <div class="w-50 ps-3">
          <h6 data-translate="keywords.selectedKeywords">Selected Keywords</h6>
          <ul id="selected-keywords-platforms-ds" class="list-group">
            <!-- Selected keywords will appear here dynamically -->
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>